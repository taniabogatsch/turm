<!-- template rendering all events of a course -->

<ul class="list-group">

  <script>
    var fromMsg = '{{msg $ "meeting.from"}}';
    var clockMsg = '{{msg $ "course.clock"}}';
  </script>

  {{range .course.Events}}
    <li class="list-group-item mb-2 border rounded">

      <!-- delete event -->
      <a class="btn btn-outline-darkblue float-right ml-3 preview-hide" href='#no-scroll' role="button"
        onclick='confirmPOSTModal({{msg $ "event.delete.title"}},
          {{msg $ "event.delete.confirm" .Title}}, "{{url "EditEvent.Delete" .ID}}#events");'>
        {{template "icons/trash.html" . }}
      </a>

      <!-- disabled enroll button -->
      <button class="btn btn-outline-darkblue float-right ml-3 preview-show d-none" href='#no-scroll' role="button" disabled>
        {{msg $ "button.enroll"}}
      </button>

      <!-- fullness and capacity -->
      <a href="#no-scroll" class="badge btn-outline-darkblue preview-hide float-right"
        onclick='openChangeModal({{msg $ "event.capacity"}}, "capacity", {{.Capacity}}, true,
          "{{url "EditEvent.ChangeCapacity"}}#events", "int", "", {{msg $ "event.capacity.change.info"}}, {{.ID}});'>
        {{template "icons/pencil.html" . }}
      </a>
      <small class="float-right">
        {{.Fullness}} / {{.Capacity}}
      </small>

      <!-- progress bar -->
      <div class="progress float-right mr-3" style="width: 8rem;">
        <div class="progress-bar bg-darkblue" role="progressbar" style="width: {{.Percentage}}%;"
          aria-valuenow="{{.Fullness}}" aria-valuemin="0" aria-valuemax="{{.Capacity}}">
          {{.Percentage}}%
        </div>
      </div>

      <!-- event title -->
      {{.Title}}
      <a href="#no-scroll" class="badge btn-outline-darkblue preview-hide"
        onclick='openChangeModal({{msg $ "event.title"}}, "title", {{.Title}},
          true, "{{url "EditEvent.ChangeText"}}#events", "text", "255",
          {{msg $ "event.title.change.info"}}, {{.ID}});'>
        {{template "icons/pencil.html" . }}
      </a>
      <br>

      <!-- waiting list information -->
      <small class="form-text text-muted float-left">
        {{template "icons/listUL.html" . }} &nbsp;
        {{if .HasWaitlist}}
          {{msg $ "event.waitlist.yes"}}
        {{else}}
          {{msg $ "event.waitlist.no"}}
        {{end}}
      </small>
      <a href="#no-scroll" class="badge btn-outline-darkblue preview-hide float-left"
        onclick='openBoolModal({{msg $ "event.waitlist.change.title"}},
          "{{url "EditEvent.ChangeWaitlist"}}#events", {{msg $ "event.waitlist.yes"}},
          {{msg $ "event.waitlist.no"}}, {{.HasWaitlist}}, "", "", {{.ID}});'>
        {{template "icons/pencil.html" . }}
      </a>
      <br>

      <!-- annotation -->
      {{if .Annotation.Valid}}
        <small class="form-text text-muted float-left">
          {{template "icons/infoSquare.html" . }} &nbsp; {{.Annotation.String}}
        </small>
        <a href="#no-scroll" class="badge btn-outline-darkblue preview-hide float-left"
          onclick='openChangeModal({{msg $ "event.annotation"}}, "annotation",
            {{.Annotation.String}}, {{.Annotation.Valid}}, "{{url "EditEvent.ChangeText"}}#events",
            "text", "255", {{msg $ "event.annotation.change.info"}}, {{.ID}});'>
          {{template "icons/pencil.html" . }}
        </a>
        <a href="#no-scroll" class="badge btn-outline-darkblue preview-hide float-left"
          onclick='confirmPOSTModal({{msg $ "event.annotation.delete.title"}},
            {{msg $ "event.annotation.delete.confirm" .Annotation.String}},
            "{{url "EditEvent.ChangeText" .ID "annotation" ""}}#events");'>
          {{template "icons/trash.html" . }}
        </a>
        <br>
      {{end}}

      <!-- meetings -->
      {{template "course/meetings.html" dict_addLocale $.currentLocale "eventID" .ID "Meetings" .Meetings}}

      <!-- add a new meeting -->
      {{if .Meetings}}
        <br class="preview-hide">
        <br class="desktop-hidden">
        <br class="desktop-hidden">
      {{end}}
      <br class="preview-hide">
      <button type="button" class="btn btn-outline-darkblue preview-hide mt-2 mt-lg-0"
        onclick='openNewMeetingModal({{.ID}});'>
        {{msg $ "creator.add.meeting"}}
      </button>

      {{if not .Annotation.Valid}}
        <!-- add annotation button -->
        <button type="button" class="btn btn-outline-darkblue preview-hide mt-2 mt-lg-0"
          onclick='openChangeModal({{msg $ "event.annotation"}}, "annotation",
            {{.Annotation.String}}, {{.Annotation.Valid}}, "{{url "EditEvent.ChangeText"}}#events",
            "text", "255", {{msg $ "event.annotation.change.info"}}, {{.ID}});'>
          + &nbsp; {{msg $ "event.annotation"}}
        </button>
      {{end}}

      <button type="button" class="btn btn-outline-darkblue preview-hide mt-2 mt-lg-0">
        + &nbsp; Einschreibeschl√ºssel
      </button>
    </li>
  {{end}}

</ul>
