<!-- course shows all course information -->

<!-- general course information -->
<div class="row edit-show d-none mb-2">
  <div class="col">
    <h5>
      {{template "icons/infoSquare.html" .}}
      &nbsp; {{msg $ "creator.general.data"}}
    </h5>
    <hr>
  </div>
</div>

<!-- title -->
<div class="row mb-2">
  <div class="col">
    <h4>
      <div id="div-title" class="d-inline">
        {{.course.Title}}
      </div>
      <a href="#no-scroll" class="badge btn-outline-darkblue edit-show d-none"
        onclick='openChangeModal({{msg $ "course.title"}}, "title",
          true, "{{url "Edit.ChangeText"}}", "text", "511",
          {{msg $ "course.title.change.info"}}, {{.course.ID}});'>
        {{template "icons/pencil.html" . }}
      </a>
    </h4>
  </div>
</div>

<!-- subtitle -->
<div id="div-edit-subtitle" {{if not .course.Subtitle.Valid}}class="d-none"{{end}}>
  <div class="row mb-2">
    <div class="col">
      <h5>
        <div id="div-subtitle" class="d-inline">
          {{.course.Subtitle.String}}
        </div>
        <a href="#no-scroll" class="badge btn-outline-darkblue edit-show d-none"
          onclick='openChangeModal({{msg $ "course.subtitle"}}, "subtitle", true,
            "{{url "Edit.ChangeText"}}", "text", "511",
            {{msg $ "course.subtitle.change.info"}}, {{.course.ID}});'>
          {{template "icons/pencil.html" . }}
        </a>
        <a href="#no-scroll" class="badge btn-outline-darkblue edit-show d-none"
          onclick='confirmDeleteModal({{msg $ "course.subtitle.delete.title"}},
            {{msg $ "course.subtitle.delete.confirm"}},
            "{{url "Edit.ChangeText" .course.ID "subtitle" ""}}");'>
          {{template "icons/trash.html" . }}
        </a>
      </h5>
    </div>
  </div>
</div>
<div id="div-add-subtitle" {{if .course.Subtitle.Valid}}class="d-none"{{end}}>
  <div class="row edit-show d-none mb-2" id="div-add-subtitle">
    <div class="col">
      <button type="button" class="btn btn-outline-darkblue"
        onclick='openChangeModal({{msg $ "course.subtitle"}}, "subtitle", false,
          "{{url "Edit.ChangeText"}}", "text", "511",
          {{msg $ "course.subtitle.change.info"}}, {{.course.ID}});'>
        {{msg $ "creator.add.subtitle"}}
      </button>
    </div>
  </div>
</div>

<hr class="edit-hide">

<!-- course creator -->
<div class="row mb-2">
  <div class="col-sm-4 text-muted">
    {{msg $ "user.role.creator"}}:
  </div>
  <div class="col-sm-8">
    {{template "templates/salutation.html" dict_addLocale $.currentLocale "User" .course.CreatorData}} |
    <a href="mailto:{{.course.CreatorData.EMail}}" target="_top">
      {{template "icons/envelope.html" .}}
      {{.course.CreatorData.EMail}}
    </a>
  </div>
</div>

<!-- course editors and instructors -->
{{if or .course.Editors .course.Instructors}}
  <div class="row mb-2">
    <div class="col-sm-4 text-muted">
      {{msg $ "user.role.instructors"}}:
    </div>
    <div class="col-sm-8">
      {{range $key, $user := .course.Editors}}
        {{if ne $key 0}}<br>{{end}}
        {{template "templates/salutation.html" dict_addLocale $.currentLocale "User" $user}} |
        <a href="mailto:{{.EMail}}" target="_top">
          {{template "icons/envelope.html" .}}
          {{.EMail}}
        </a>
        <div class="edit-show d-none text-muted">
          {{msg $ "user.role.editor"}}
          |
          {{if .ViewMatrNr}}{{template "icons/eye.html" . }}{{msg $ "user.matr.nrs"}}{{else}}{{template "icons/eyeSlash.html" . }}{{msg $ "user.matr.nrs"}}{{end}}
          <a href="#no-scroll" class="badge btn-outline-darkblue"
            onclick='openBoolModal({{msg $ "course.matr.nr.change.title"}}, "{{url "Edit.ChangeViewMatrNr"}}#", {{msg $ "course.see.matr.nr.info"}},
              {{msg $ "course.not.see.matr.nr.info"}}, {{.ViewMatrNr}}, {{.UserID}}, "editors", {{$.course.ID}});'>
            {{template "icons/pencil.html" . }}
          </a>
          |
          <a href="#no-scroll" class="badge btn-outline-darkblue"
            onclick='confirmPOSTModal({{msg $ "course.editor.delete.title"}}, {{msg $ "course.editor.delete.confirm" .EMail}},
              "{{url "Edit.DeleteFromUserList" .CourseID .UserID "editors"}}#");'>
            {{template "icons/trash.html" . }}
          </a>
        </div>
      {{end}}
      {{range $key, $user := .course.Instructors}}
        {{if $.course.Editors}}<br>{{else if ne $key 0}}<br>{{end}}
        {{template "templates/salutation.html" dict_addLocale $.currentLocale "User" $user}} |
        <a href="mailto:{{.EMail}}" target="_top">
          {{template "icons/envelope.html" .}}
          {{.EMail}}
        </a>
        <div class="edit-show d-none text-muted">
          {{msg $ "user.role.instructor"}}
          |
          {{if .ViewMatrNr}}{{template "icons/eye.html" . }}{{msg $ "user.matr.nrs"}}{{else}}{{template "icons/eyeSlash.html" . }}{{msg $ "user.matr.nrs"}}{{end}}
          <a href="#no-scroll" class="badge btn-outline-darkblue"
            onclick='openBoolModal({{msg $ "course.matr.nr.change.title"}}, "{{url "Edit.ChangeViewMatrNr"}}#", {{msg $ "course.see.matr.nr.info"}},
              {{msg $ "course.not.see.matr.nr.info"}}, {{.ViewMatrNr}}, {{.UserID}}, "instructors", {{$.course.ID}});'>
            {{template "icons/pencil.html" . }}
          </a>
          |
          <a href="#no-scroll" class="badge btn-outline-darkblue"
            onclick='confirmPOSTModal({{msg $ "course.instructor.delete.title"}}, {{msg $ "course.instructor.delete.confirm" .EMail}},
              "{{url "Edit.DeleteFromUserList" .CourseID .UserID "instructors"}}#");'>
            {{template "icons/trash.html" . }}
          </a>
        </div>
      {{end}}
    </div>
  </div>
{{end}}
<div class="row edit-show d-none mb-2">
  <div class="col-sm-4 text-muted">
  </div>
  <div class="col-sm-8">
    <button type="button" class="btn btn-outline-darkblue"
      onclick='openUserListModal({{msg $ "creator.add.editor"}}, "editors");'>
      {{msg $ "creator.add.editor"}}
    </button>
    <button type="button" class="btn btn-outline-darkblue"
      onclick='openUserListModal({{msg $ "creator.add.instructor"}}, "instructors");'>
      {{msg $ "creator.add.instructor"}}
    </button>
  </div>
</div>

<!-- registration period -->
<div class="row mb-2" id="course-registration-period">
  <div class="col-sm-4 text-muted">
    {{msg $ "course.enrollment.period"}}:
  </div>
  <div class="col-sm-8">
    {{msg $ "course.from"}} {{.course.EnrollmentStart}} {{msg $ "course.clock"}}
    <a href="#no-scroll" class="badge btn-outline-darkblue edit-show d-none"
      onclick='openChangeModal({{msg $ "course.enrollment.start"}}, "enrollment_start",
        {{.course.EnrollmentStart}}, true, "{{url "Edit.ChangeTimestamp"}}#",
        "timestamp", "", {{msg $ "course.enrollment.start.change.info"}}, {{.course.ID}});'>
      {{template "icons/pencil.html" . }}
    </a>
    <br>
    {{msg $ "course.to"}} {{.course.EnrollmentEnd}} {{msg $ "course.clock"}}
    <a href="#no-scroll" class="badge btn-outline-darkblue edit-show d-none"
      onclick='openChangeModal({{msg $ "course.enrollment.end"}}, "enrollment_end",
        {{.course.EnrollmentEnd}}, true, "{{url "Edit.ChangeTimestamp"}}#",
        "timestamp", "", {{msg $ "course.enrollment.end.change.info"}}, {{.course.ID}});'>
      {{template "icons/pencil.html" . }}
    </a>
  </div>
</div>

<!-- if the course has a time up to which users can unsubscribe -->
{{if .course.UnsubscribeEnd.Valid}}
  <div class="row mb-2">
    <div class="col-sm-4 text-muted">
      {{msg $ "course.unsubscribe.end"}}:
    </div>
    <div class="col-sm-8">
      {{.course.UnsubscribeEnd.String}} {{msg $ "course.clock"}}
      <a href="#no-scroll" class="badge btn-outline-darkblue edit-show d-none"
        onclick='openChangeModal({{msg $ "course.unsubscribe.end"}}, "unsubscribe_end",
          {{.course.UnsubscribeEnd.String}}, {{.course.UnsubscribeEnd.Valid}},
          "{{url "Edit.ChangeTimestamp"}}#", "timestamp", "",
          {{msg $ "course.unsubscribe.end.info"}}, {{.course.ID}});'>
        {{template "icons/pencil.html" . }}
      </a>
      <a href="#no-scroll" class="badge btn-outline-darkblue edit-show d-none"
        onclick='confirmPOSTModal({{msg $ "course.unsubscribe.end.delete.title"}},
          {{msg $ "course.unsubscribe.end.delete.confirm" .course.UnsubscribeEnd.String}},
          "{{url "Edit.ChangeTimestamp" .course.ID "unsubscribe_end" "" ""}}#");'>
        {{template "icons/trash.html" . }}
      </a>
    </div>
  </div>
{{else}}
  <div class="row mb-2 edit-show d-none">
    <div class="col-sm-4 text-muted">
      {{msg $ "course.unsubscribe.end"}}:
    </div>
    <div class="col-sm-8">
      <button type="button" class="btn btn-outline-darkblue"
        onclick='openChangeModal({{msg $ "course.unsubscribe.end"}}, "unsubscribe_end",
          {{.course.UnsubscribeEnd.String}}, {{.course.UnsubscribeEnd.Valid}},
          "{{url "Edit.ChangeTimestamp"}}#", "timestamp", "",
          {{msg $ "course.unsubscribe.end.info"}}, {{.course.ID}});'>
        {{msg $ "creator.add.unsubscribe.end"}}
      </button>
    </div>
  </div>
{{end}}

<!-- show fee if there is one -->
<div id="div-edit-fee" {{if not .course.Fee.Valid}}class="d-none"{{end}}>
  <div class="row mb-2">
    <div class="col-sm-4 text-muted">
       {{msg $ "course.fee"}}:
     </div>
     <div class="col-sm-8">
       <div id="div-fee" class="d-inline">
       {{.course.Fee.Float64}}</div>â‚¬
       <a href="#no-scroll" class="badge btn-outline-darkblue edit-show d-none"
         onclick='openChangeModal({{msg $ "course.fee"}}, "fee", true,
           "{{url "Edit.ChangeText"}}", "text", "",
           {{msg $ "course.fee.change.info"}}, {{.course.ID}});'>
         {{template "icons/pencil.html" . }}
       </a>
       <a href="#no-scroll" class="badge btn-outline-darkblue edit-show d-none"
         onclick='confirmDeleteModal({{msg $ "course.fee.delete.title"}},
           {{msg $ "course.fee.delete.confirm"}},
           "{{url "Edit.ChangeText" .course.ID "fee" ""}}");'>
         {{template "icons/trash.html" . }}
       </a>
     </div>
  </div>
</div>
<div id="div-add-fee" {{if .course.Fee.Valid}}class="d-none"{{end}}>
  <div class="row mb-2 edit-show d-none">
    <div class="col-sm-4 text-muted">
       {{msg $ "course.fee"}}:
     </div>
     <div class="col-sm-8">
      <button type="button" class="btn btn-outline-darkblue"
        onclick='openChangeModal({{msg $ "course.fee"}}, "fee", false,
          "{{url "Edit.ChangeText"}}", "text", "",
          {{msg $ "course.fee.change.info"}}, {{.course.ID}});'>
        {{msg $ "creator.add.fee"}}
      </button>
    </div>
  </div>
</div>

<!-- description -->
<div id="div-edit-description" {{if not .course.Description.Valid}}class="d-none"{{end}}>
  <div class="row mb-2">
    <div class="col-sm-4 text-muted">
      {{msg $ "course.description"}}:
      <br>
      <a data-toggle="collapse" href="#div-description" role="button"
        aria-expanded="true" aria-controls="div-description"
        id="course-description-btn">
        {{msg $ "button.collapse"}}
      </a>
      <a href="#no-scroll" class="badge btn-outline-darkblue edit-show d-none"
        onclick='openTextAreaModal({{msg $ "course.description"}},
          "description", true, "{{url "Edit.ChangeText"}}",
          {{msg $ "course.description.change.info"}}, false);'>
        {{template "icons/pencil.html" . }}
      </a>
      <a href="#no-scroll" class="badge btn-outline-darkblue edit-show d-none"
        onclick='confirmDeleteModal({{msg $ "course.description.delete.title"}},
          {{msg $ "course.description.delete.confirm"}},
          "{{url "Edit.ChangeText" .course.ID  "description" ""}}#course-registration-period");'>
        {{template "icons/trash.html" . }}
      </a>
    </div>
    <div class="col-sm-8">
      <div class="collapse show" id="div-description">
      </div>
    </div>
  </div>
</div>
<div id="div-add-description" {{if .course.Description.Valid}}class="d-none"{{end}}>
  <div class="row mb-2 edit-show d-none">
    <div class="col-sm-4 text-muted">
      {{msg $ "course.description"}}:
    </div>
    <div class="col-sm-8">
      <button type="button" class="btn btn-outline-darkblue"
        onclick='openTextAreaModal({{msg $ "course.description"}},
          "description", false, "{{url "Edit.ChangeText"}}",
          {{msg $ "course.description.change.info"}}, false);'>
        {{msg $ "creator.add.description"}}
      </button>
    </div>
  </div>
</div>

<!-- speaker -->
<div id="div-edit-speaker" {{if not .course.Speaker.Valid}}class="d-none"{{end}}>
  <div class="row mb-2">
    <div class="col-sm-4 text-muted">
      {{msg $ "course.speaker"}}:
      <br>
      <a data-toggle="collapse" href="#div-speaker" role="button"
        aria-expanded="true" aria-controls="div-speaker"
        id="course-speaker-btn">
        {{msg $ "button.collapse"}}
      </a>
      <a href="#no-scroll" class="badge btn-outline-darkblue edit-show d-none"
        onclick='openTextAreaModal({{msg $ "course.speaker"}},
          "speaker", true, "{{url "Edit.ChangeText"}}",
          {{msg $ "course.speaker.change.info"}}, false);'>
        {{template "icons/pencil.html" . }}
      </a>
      <a href="#no-scroll" class="badge btn-outline-darkblue edit-show d-none"
        onclick='confirmDeleteModal({{msg $ "course.speaker.delete.title"}},
          {{msg $ "course.speaker.delete.confirm"}},
          "{{url "Edit.ChangeText" .course.ID  "speaker" ""}}");'>
        {{template "icons/trash.html" . }}
      </a>
    </div>
    <div class="col-sm-8">
      <div class="collapse show" id="div-speaker">
      </div>
    </div>
  </div>
</div>
<div id="div-add-speaker" {{if .course.Speaker.Valid}}class="d-none"{{end}}>
  <div class="row mb-2 edit-show d-none">
    <div class="col-sm-4 text-muted">
      {{msg $ "course.speaker"}}:
    </div>
    <div class="col-sm-8">
      <button type="button" class="btn btn-outline-darkblue"
        onclick='openTextAreaModal({{msg $ "course.speaker"}},
          "speaker", false, "{{url "Edit.ChangeText"}}",
          {{msg $ "course.speaker.change.info"}}, false);'>
        {{msg $ "creator.add.speaker"}}
      </button>
    </div>
  </div>
</div>

<!-- only ldap -->
<div class="row mb-2 {{if not .course.OnlyLDAP}}edit-show d-none{{end}}" id="events">
  <div class="col-sm-4 text-muted">
    {{msg $ "course.audience"}}:
  </div>
  <div class="col-sm-8">
    <form id="change-ldap-form" accept-charset="UTF-8" method="POST" action='{{url "Edit.ChangeBool"}}'>
      <!-- course ID -->
      <input type="hidden" name="ID" value="{{.course.ID}}">
      <!-- list type -->
      <input type="hidden" name="listType" value="only_ldap">
      <!-- option -->
      <label class="switch edit-show d-none">
        <input type="checkbox" name="option" id="change-ldap-switch"
          {{if .course.OnlyLDAP}}checked{{end}}>
        <span class="slider round"></span>
      </label>
      <label class="form-check-label">
        {{msg $ "course.only.ldap"}}
      </label>
    </form>
  </div>
</div>

<!-- restrictions -->
{{if .course.Restrictions}}
  <div class="row mb-2">
    <div class="col-sm-4 text-muted">
      {{msg $ "course.restrictions"}}:
    </div>
    <div class="col-sm-8">
      <ul>
        {{range $k, $v := .course.Restrictions}}
          <li>
            {{if .DegreeID.Valid}}{{.DegreeName.String}}{{end}}
            {{if .CourseOfStudiesID.Valid}}{{.StudiesName.String}}{{end}}
            {{if .MinimumSemester.Valid}}
              <small class="text-muted d-inline">
                {{msg $ "course.minimum.semester"}}:{{.MinimumSemester.Int64}}
              </small>
            {{end}}

            <a href="#no-scroll" class="badge btn-outline-darkblue edit-show d-none"
              onclick='openRestrictionModal({{msg $ "course.restrictions"}}, {{.ID}},
                {{.DegreeID.Int64}}, {{.CourseOfStudiesID.Int64}}, {{.MinimumSemester.Int64}});'>
              {{template "icons/pencil.html" . }}
            </a>
            <a href="#no-scroll" class="badge btn-outline-darkblue edit-show d-none"
              onclick='confirmPOSTModal({{msg $ "course.restriction.delete.title"}},
                {{msg $ "course.restriction.delete.confirm"}}, {{url "Edit.DeleteRestriction" $.course.ID .ID}});'>
              {{template "icons/trash.html" . }}
            </a>
          </li>
        {{end}}
      </ul>
    </div>
  </div>
{{end}}
<div class="row mb-2 edit-show d-none">
  <div class="col-sm-4 text-muted">
  </div>
  <div class="col-sm-8"> <!-- TODO: add restrictions -->
    <button type="button" class="btn btn-outline-darkblue"
      onclick='openRestrictionModal("{{msg $ "course.restrictions"}}", 0, 0, 0, 0);'>
      {{msg $ "creator.add.restriction"}}
    </button>
  </div>
</div>

<br>
<br>

<!-- events -->
<div class="row edit-show d-none mb-2">
  <div class="col">
    <h5>
      {{template "icons/people.html" .}}
      &nbsp; {{msg $ "course.events"}}
    </h5>
    <small class="text-muted">
      {{msg $ "course.events.info"}}
    </small>
    <hr>
  </div>
</div>

<!-- new event -->
<div class="row mb-2 edit-show d-none">
  <div class="col">
    <button type="button" class="btn btn-outline-darkblue"
      onclick='openChangeModal({{msg $ "creator.event.new"}}, "event",
        {{msg $ "event.title"}}, false, "{{url "Edit.NewEvent"}}#events",
        "text", "255", {{msg $ "creator.title.event.working.info"}},
        {{.course.ID}});'>
      {{msg $ "creator.add.event"}}
    </button>
  </div>
</div>

<!-- event list -->
{{template "course/events.html" dict_addLocale $.currentLocale "course" .course}}

<br id="more-settings">
<br>


<!-- more settings -->
<div class="row edit-show d-none mb-2">
  <div class="col">
    <h5>
      {{template "icons/tools.html" .}}
      &nbsp; {{msg $ "creator.more.settings"}}
    </h5>
    <small class="text-muted">
      {{msg $ "creator.more.settings.info"}}
    </small>
    <hr>
  </div>
</div>

<!-- course path -->
<div class="row mb-2 edit-show d-none">
  <div class="col-sm-4 text-muted">
    {{msg $ "course.path"}}:
  </div>
  <div class="col-sm-8">
    {{if .course.Path}}
      <ol class="breadcrumb bg-white m-0 p-0">
        {{range .course.Path}}
          <li class="breadcrumb-item">{{.Name}}</li>
          {{if eq .Name $.course.Title}}
            &nbsp;
            <a href="#no-scroll" class="badge btn-outline-darkblue float-right"
              data-toggle="modal" data-target="#change-group-modal">
              {{template "icons/pencil.html" . }}
            </a>
          {{end}}
        {{end}}
      </ol>
    {{else}}
      <button type="button" class="btn btn-outline-darkblue"
        data-toggle="modal" data-target="#change-group-modal">
        {{msg $ "creator.add.path"}}
      </button>
    {{end}}
  </div>
</div>

<!-- visibility -->
<div class="row mb-2 edit-show d-none">
  <div class="col-sm-4 text-muted">
    {{msg $ "course.visibility"}}:
  </div>
  <div class="col-sm-8">
    <form id="change-visibility-form" accept-charset="UTF-8" method="POST" action='{{url "Edit.ChangeBool"}}#more-settings'>
      <!-- course ID -->
      <input type="hidden" name="ID" value="{{.course.ID}}">
      <!-- list type -->
      <input type="hidden" name="listType" value="visible">
      <!-- option -->
      <label class="switch">
        <input type="checkbox" name="option" id="change-visibility-switch"
          {{if .course.Visible}}checked{{end}}>
        <span class="slider round"></span>
      </label>
      <label class="form-check-label">
        {{msg $ "course.visibility.public"}}
      </label>
    </form>
  </div>
</div>

<!-- expiration date -->
<div class="row mb-2 edit-show d-none">
  <div class="col-sm-4 text-muted">
    {{msg $ "course.expiration.date"}}:
  </div>
  <div class="col-sm-8">
    {{.course.ExpirationDate}} {{msg $ "course.clock"}}
    <a href="#no-scroll" class="badge btn-outline-darkblue edit-show d-none"
      onclick='openChangeModal({{msg $ "course.expiration.date"}}, "expiration_date",
        {{.course.ExpirationDate}}, true, "{{url "Edit.ChangeTimestamp"}}#more-settings",
        "timestamp", "", {{msg $ "course.expiration.date.change.info"}},
        {{.course.ID}});'>
      {{template "icons/pencil.html" . }}
    </a>
  </div>
</div>

<!-- enrollment limit events -->
{{if .course.EnrollLimitEvents.Valid}}
  <div class="row mb-2 edit-show d-none">
    <div class="col-sm-4 text-muted">
      {{msg $ "course.enroll.limit.events"}}:
    </div>
    <div class="col-sm-8">
      {{.course.EnrollLimitEvents.Int32}} {{msg $ "course.events"}}
      <a href="#no-scroll" class="badge btn-outline-darkblue edit-show d-none"
        onclick='openChangeModal({{msg $ "course.enroll.limit.events"}}, "enroll_limit_events",
          {{.course.EnrollLimitEvents.Int32}}, {{.course.EnrollLimitEvents.Valid}},
          "{{url "Edit.ChangeEnrollLimit"}}#more-settings", "int", "", {{msg $ "course.enroll.limit.events.change.info"}},
          {{.course.ID}});'>
        {{template "icons/pencil.html" . }}
      </a>
      <a href="#no-scroll" class="badge btn-outline-darkblue edit-show d-none"
        onclick='confirmPOSTModal({{msg $ "course.enroll.limit.events.delete.title"}},
          {{msg $ "course.enroll.limit.events.delete.confirm" .course.EnrollLimitEvents.Int32}},
          "{{url "Edit.ChangeEnrollLimit" .course.ID "enroll_limit_events" ""}}#more-settings");'>
        {{template "icons/trash.html" . }}
      </a>
    </div>
  </div>
{{else}}
  <div class="row mb-2 edit-show d-none">
    <div class="col-sm-4 text-muted">
      {{msg $ "course.enroll.limit.events"}}:
    </div>
    <div class="col-sm-8">
      <button type="button" class="btn btn-outline-darkblue"
      onclick='openChangeModal({{msg $ "course.enroll.limit.events"}}, "enroll_limit_events",
        {{.course.EnrollLimitEvents.Int32}}, {{.course.EnrollLimitEvents.Valid}},
        "{{url "Edit.ChangeEnrollLimit"}}#more-settings", "int", "", {{msg $ "course.enroll.limit.events.change.info"}},
        {{.course.ID}});'>
        {{msg $ "creator.add.enroll.limit"}}
      </button>
    </div>
  </div>
{{end}}

<!-- custom e-mail -->
<div id="div-edit-custom_email" {{if not .course.CustomEMail.Valid}}class="d-none"{{end}}>
  <div class="row mb-2 edit-show d-none">
    <div class="col-sm-4 text-muted">
      {{msg $ "course.custom.email"}}:
      <br>
      <a data-toggle="collapse" href="#div-custom_email" role="button"
        aria-expanded="true" aria-controls="div-custom_email"
        id="course-custom_email-btn">
        {{msg $ "button.collapse"}}
      </a>
      <a href="#no-scroll" class="badge btn-outline-darkblue edit-show d-none"
        onclick='openTextAreaModal({{msg $ "course.custom.email"}},
          "custom_email", true, "{{url "Edit.ChangeText"}}",
          {{msg $ "course.custom.email.change.info"}}, true);'>
        {{template "icons/pencil.html" . }}
      </a>
      <a href="#no-scroll" class="badge btn-outline-darkblue edit-show d-none"
        onclick='confirmDeleteModal({{msg $ "course.customemail.delete.title"}},
          {{msg $ "course.customemail.delete.confirm"}},
          "{{url "Edit.ChangeText" .course.ID  "custom_email" ""}}");'>
        {{template "icons/trash.html" . }}
      </a>
    </div>
    <div class="col-sm-8">
      <div class="collapse show" id="div-custom_email">
      </div>
    </div>
  </div>
</div>
<div id="div-add-custom_email" {{if .course.CustomEMail.Valid}}class="d-none"{{end}}>
  <div class="row mb-2 edit-show d-none">
    <div class="col-sm-4 text-muted">
      {{msg $ "course.custom.email"}}:
    </div>
    <div class="col-sm-8">
      <button type="button" class="btn btn-outline-darkblue"
        onclick='openTextAreaModal({{msg $ "course.custom.email"}},
          "custom_email", false, "{{url "Edit.ChangeText"}}",
          {{msg $ "course.custom.email.change.info"}}, true);'>
        {{msg $ "creator.add.custom.email"}}
      </button>
    </div>
  </div>
</div>

<!-- whitelist -->
{{if .course.Whitelist}}
  <div class="row mb-2 edit-show d-none">
    <div class="col-sm-4 text-muted">
      {{msg $ "course.whitelist"}}:
    </div>
    <div class="col-sm-8">
      {{range $key, $user := .course.Whitelist}}
        {{if ne $key 0}}<br>{{end}}
        {{template "templates/salutation.html" dict_addLocale $.currentLocale "User" $user}} |
        <a href="mailto:{{.EMail}}" target="_top">
          {{template "icons/envelope.html" .}}
          {{.EMail}}
        </a>
        |
        <a href="#no-scroll" class="badge btn-outline-darkblue"
          onclick='confirmPOSTModal({{msg $ "course.whitelist.delete.title"}}, {{msg $ "course.whitelist.delete.confirm" .EMail}},
            "{{url "Edit.DeleteFromUserList" .CourseID .UserID "whitelists"}}#more-settings");'>
          {{template "icons/trash.html" . }}
        </a>
      {{end}}
    </div>
  </div>
{{end}}
<div class="row mb-2 edit-show d-none">
  <div class="col-sm-4 text-muted">
  </div>
  <div class="col-sm-8">
    <button type="button" class="btn btn-outline-darkblue"
      onclick='openUserListModal({{msg $ "creator.add.whitelist"}}, "whitelists");'>
      {{msg $ "creator.add.whitelist"}}
    </button>
  </div>
</div>

<!-- blacklist -->
{{if .course.Blacklist}}
  <div class="row mb-2 edit-show d-none">
    <div class="col-sm-4 text-muted">
      {{msg $ "course.blacklist"}}:
    </div>
    <div class="col-sm-8">
      {{range $key, $user := .course.Blacklist}}
        {{if ne $key 0}}<br>{{end}}
        {{template "templates/salutation.html" dict_addLocale $.currentLocale "User" $user}} |
        <a href="mailto:{{.EMail}}" target="_top">
          {{template "icons/envelope.html" .}}
          {{.EMail}}
        </a>
        |
        <a href="#no-scroll" class="badge btn-outline-darkblue"
          onclick='confirmPOSTModal({{msg $ "course.blacklist.delete.title"}}, {{msg $ "course.blacklist.delete.confirm" .EMail}},
            "{{url "Edit.DeleteFromUserList" .CourseID .UserID "blacklists"}}#more-settings");'>
          {{template "icons/trash.html" . }}
        </a>
      {{end}}
    </div>
  </div>
{{end}}
<div class="row mb-2 edit-show d-none">
  <div class="col-sm-4 text-muted">
  </div>
  <div class="col-sm-8">
    <button type="button" class="btn btn-outline-darkblue"
      onclick='openUserListModal({{msg $ "creator.add.blacklist"}}, "blacklists");'>
      {{msg $ "creator.add.blacklist"}}
    </button>
  </div>
</div>

<script>
  //render all html content
  $(function() {
    $('#div-description').html('{{.course.Description.String}}');
    $('#div-speaker').html('{{.course.Speaker.String}}');
    $('#div-custom_email').html('{{.course.CustomEMail.String}}');

    $('#div-description').on('hidden.bs.collapse', function () {
      $('#course-description-btn').html('{{msg $ "button.show"}}');
    })
    $('#div-description').on('shown.bs.collapse', function () {
      $('#course-description-btn').html('{{msg $ "button.collapse"}}');
    })

    $('#div-speaker').on('hidden.bs.collapse', function () {
      $('#course-speaker-btn').html('{{msg $ "button.show"}}');
    })
    $('#div-speaker').on('shown.bs.collapse', function () {
      $('#course-speaker-btn').html('{{msg $ "button.collapse"}}');
    })

    $('#div-custom_email').on('hidden.bs.collapse', function () {
      $('#course-custom_email-btn').html('{{msg $ "button.show"}}');
    })
    $('#div-custom_email').on('shown.bs.collapse', function () {
      $('#course-custom_email-btn').html('{{msg $ "button.collapse"}}');
    })
  });
</script>
