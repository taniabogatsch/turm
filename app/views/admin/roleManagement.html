<!-- template containing an overview over all users with elevated roles -->

{{template "header.html" .}}

{{template "admin/leftNav.html" . }}

<div class="page page-middle">
  <div class="tab-content">

    <h4>
      {{template "icons/person.html" . }} &nbsp; {{msg $ "admin.roles"}}
    </h4>
    <hr>

    <!-- admins -->
    <h5> {{template "icons/display.html" . }} &nbsp; {{msg $ "user.admins"}} </h5>
    <table class="table">
      <thead>
        <tr>
          <th scope="col"> {{msg $ "user.name"}} </th>
          <th scope="col"> {{msg $ "user.email"}} </th>
          <th scope="col"> {{msg $ "user.last.login"}} </th>
          <th scope="col"> </th>
        </tr>
      </thead>
      <tbody>
        {{range .admins}}
          <tr>
            <td>
              {{template "templates/salutation.html" dict_addLocale $.currentLocale "User" .}}
            </td>
            <td> {{.EMail}} </td>
            <td> {{.LastLogin}} </td>
            <td class="text-right">
              <a href="#" onclick="userDetails({{.ID}})" class="badge badge-secondary btn-darkblue">
                {{template "icons/tools.html"}}
              </a>
            </td>
          </tr>
        {{else}}
          {{if .errMsg}}
            <tr>
              <td colspan="4">
                <div class="warning-feedback color-danger">
                  {{.errMsg}}
                </div>
              </td>
            </tr>
          {{end}}
        {{end}}
      </tbody>
    </table>

    <!-- creators -->
    <br>
    <h5> {{template "icons/people.html" . }} &nbsp; {{msg $ "user.creators"}} </h5>
    <table class="table">
      <thead>
        <tr>
          <th scope="col"> {{msg $ "user.name"}} </th>
          <th scope="col"> {{msg $ "user.email"}} </th>
          <th scope="col"> {{msg $ "user.last.login"}} </th>
          <th scope="col"> </th>
        </tr>
      </thead>
      <tbody>
        {{range .creators}}
          <tr>
            <td>
              {{template "templates/salutation.html" dict_addLocale $.currentLocale "User" .}}
            </td>
            <td> {{.EMail}} </td>
            <td> {{.LastLogin}} </td>
            <td class="text-right">
              <a href="#" onclick="userDetails({{.ID}})" class="badge badge-secondary btn-darkblue">
                {{template "icons/tools.html"}}
              </a>
            </td>
          </tr>
        {{else}}
          <tr>
            <td colspan="4">
              {{if .errMsg}}
                <div class="warning-feedback color-danger">
                  {{.errMsg}}
                </div>
              {{else}}
                {{msg $ "admin.no.creators"}}
              {{end}}
            </td>
          </tr>
        {{end}}
      </tbody>
    </table>
  </div>
</div>

{{template "admin/rightNav.html" . }}

<script>
  $(function() {
    //adjust the nav pills
    $('#v-pills-roles-tab').addClass("active");
  });
</script>

{{template "footer.html" .}}
