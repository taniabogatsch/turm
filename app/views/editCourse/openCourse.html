<!-- template containing the new course creation -->

{{template "header.html" .}}

{{template "manageCourses/templates/leftNav.html" . }}

<div class="page page-middle">
  <div class="tab-content">

    <h4>
      <!-- show either an open draft or an open course -->
      {{template "icons/folder.html" . }}
      {{if .course.Active}}
        &nbsp; {{msg $ "creator.course.is.open"}}
      {{else}}
        &nbsp; {{msg $ "creator.course.draft.is.open"}}
      {{end}}

      {{if eq .session.role "admin"}}
        {{if not .course.Active}}
          <!-- activate the course -->
          <button type="button" class="btn btn-outline-darkblue float-right">
            {{msg $ "creator.course.activate"}} <!-- TODO -->
          </button>
        {{else}}
          <!-- expire the course -->
          <button type="button" class="btn btn-outline-darkblue float-right">
            {{msg $ "creator.course.expire"}} <!-- TODO -->
          </button>
        {{end}}
      {{else}}
        {{if eq .course.CreatorID .session.userID}}
          {{if not .course.Active}}
            <!-- activate the course -->
            <form class="float-right" action='{{url "Creator.Activate" .course.ID}}' method="POST">
              <button type="submit" class="btn btn-outline-darkblue">
                {{msg $ "creator.course.activate"}} <!-- TODO -->
              </button>
            </form>
          {{else}}
            <!-- expire the course -->
            <button type="button" class="btn btn-outline-darkblue float-right">
              {{msg $ "creator.course.expire"}} <!-- TODO -->
            </button>
          {{end}}
        {{end}}
      {{end}}

      <!-- validate course -->
      <form class="float-right margin-right-20" action='{{url "EditCourse.Validate" .course.ID}}' method="POST">
        <button type="submit" class="btn btn-outline-darkblue">
          {{msg $ "creator.course.validate"}}
        </button>
      </form>

      <button id="preview-btn" type="button" class="btn btn-outline-darkblue float-right margin-right-20" onclick="showPreview();">
        {{msg $ "creator.course.preview"}}
      </button>
    </h4>
    <hr>

    {{if .errMsg}}
      <div class="warning-feedback color-danger">
        {{.errMsg}}
      </div>
    {{else}}
      {{template "course/course.html" dict_addLocale $.currentLocale "course" .course}}
      <!-- load all modals responsible for changing content -->
      {{template "editCourse/loadModals.html" dict_addLocale $.currentLocale "course" .course}}
    {{end}}
  </div>
</div>

{{template "manageCourses/templates/rightNav.html" . }}

{{template "footer.html" .}}
